
<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Hello World How Tos &mdash; T4 Developer Guide</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link href="../_static/jquery-ui.css" rel="stylesheet" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

      <link rel="shortcut icon" href="../_static/favicon.ico" />  
  
  
  <link rel="canonical" href="add the root doc url herehelloworld.html" />
  

  
  
  
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/language_data.js"></script>
  <script type="text/javascript" src="../_static/searchtools.js"></script>
  <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
  <script type="text/javascript" src="../_static/js/theme.js"></script>
   
  
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="T4 Cache APIs" href="cache.html" />
    <link rel="prev" title="Testing T4" href="t4testing.html" /> 
  

	<script>
    $(document).ready(function () {
      $(window).scroll(function () {
        if ($(this).scrollTop() >= 50) {
          $('.fixedbar, .wy-nav-side').addClass('scroll');
          $('.wy-top-menu-wrapper').fadeOut();
        } else {
          $('.fixedbar, .wy-nav-side').removeClass('scroll');
          $('.wy-top-menu-wrapper').fadeIn();
        }
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 100) {
          $('#scroll').fadeIn();
        } else {
          $('#scroll').fadeOut();
        }
      });
      $('#scroll').click(function () {
        $("html, body").animate({ scrollTop: 0 }, 600);
        return false;
      });
    });
  </script>

<style>
  .wy-nav-content {max-width:90%}
  </style>
</head>

<body class="wy-body-for-nav">


  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
	  
	  	  
<!-- @@@@@@@@@@@@@@@@ Custom @@@@@@@@@@@@@@@@ -->
        <div class="wy-logo-wrapper">
          <a href="https://www.adobe.com">
            <img src="../_static/acrobaticon.png" class="logo"/>Adobe T4 Documentation</a>
        </div> 
 <!-- @@@@@@@@@@@@@@@@ Custom @@@@@@@@@@@@@@@@ -->
 
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> T4 Developer Guide
          

          
          </a>


          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="writingcppint4.html">C++ Best Practices for T4</a><ul>
<li class="toctree-l2"><a class="reference internal" href="writingcppint4.html#the-most-important-thing">The Most Important Thing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#two-important-questions">Two Important Questions</a></li>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#let-s-not-kid-ourselves">Let’s Not Kid Ourselves</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="writingcppint4.html#typographic-conventions">Typographic Conventions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#identifiers">Identifiers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="writingcppint4.html#case-underbars">Case, Underbars</a></li>
<li class="toctree-l4"><a class="reference internal" href="writingcppint4.html#prefixing-suffixing">Prefixing/Suffixing</a></li>
<li class="toctree-l4"><a class="reference internal" href="writingcppint4.html#macros">Macros</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#tabs">Tabs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="writingcppint4.html#xcode-and-tabs">Xcode and Tabs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#braces-indentation-and-carriage-returns">Braces, Indentation and Carriage Returns</a></li>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#parentheses">Parentheses</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="writingcppint4.html#code-organization">Code Organization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#file-organization">File Organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#writing-a-class">Writing a Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="writingcppint4.html#also-acceptable-raw-structs">Also Acceptable: Raw Structs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="writingcppint4.html#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#error-handling">Error Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#resource-acquisition-is-initialization-raii">Resource Acquisition Is Initialization (RAII)</a></li>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#return-values">Return Values</a><ul>
<li class="toctree-l4"><a class="reference internal" href="writingcppint4.html#multiple-return-values">Multiple Return Values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#inheritance">Inheritance</a><ul>
<li class="toctree-l4"><a class="reference internal" href="writingcppint4.html#the-override-keyword">The override keyword</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#shared-and-unique-pointers">Shared and Unique Pointers</a></li>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#namespaces">Namespaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#integers">Integers</a></li>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#alphabetization">Alphabetization</a></li>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#platform-architecture-and-os-specific-code">Platform, Architecture and OS Specific Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="writingcppint4.html#geometry">Geometry</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="t4fileorganization.html">T4 File Organization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="t4fileorganization.html#about-header-files">About Header Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="t4fileorganization.html#where-everything-goes">Where Everything Goes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="t4fileorganization.html#about-detail-namespaces">About Detail Namespaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="t4fileorganization.html#implementation-headers">Implementation Headers</a></li>
<li class="toctree-l3"><a class="reference internal" href="t4fileorganization.html#how-far-to-go-with-this">How Far to Go With This</a></li>
<li class="toctree-l3"><a class="reference internal" href="t4fileorganization.html#going-even-farther">Going Even Farther</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="t4andexceptions.html">T4 and Exceptions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="t4andexceptions.html#but-let-s-not-kid-ourselves">But Let’s Not Kid Ourselves</a></li>
<li class="toctree-l2"><a class="reference internal" href="t4andexceptions.html#the-gruesome-details">The Gruesome Details</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="t4testing.html">Testing T4</a><ul>
<li class="toctree-l2"><a class="reference internal" href="t4testing.html#t4-test">t4-test</a><ul>
<li class="toctree-l3"><a class="reference internal" href="t4testing.html#building-t4-test">Building t4-test</a></li>
<li class="toctree-l3"><a class="reference internal" href="t4testing.html#first-steps">First steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="t4testing.html#concepts">Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="t4testing.html#modes-of-execution">Modes of Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="t4testing.html#t4-test-on-ios"><code class="docutils literal notranslate"><span class="pre">t4-test</span></code> on iOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="t4testing.html#performance">Performance</a><ul>
<li class="toctree-l4"><a class="reference internal" href="t4testing.html#implementation-details-how-t4-test-measures-performance">Implementation Details: How t4-test Measures Performance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="t4testing.html#output">Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="t4testing.html#other-options">Other Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="t4testing.html#other-t4-test-features">Other t4-test Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="t4testing.html#rendering">Rendering</a></li>
<li class="toctree-l4"><a class="reference internal" href="t4testing.html#text-extraction">Text Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="t4testing.html#document-info">Document Info</a></li>
<li class="toctree-l4"><a class="reference internal" href="t4testing.html#requesting-multiple-pages">Requesting Multiple Pages</a></li>
<li class="toctree-l4"><a class="reference internal" href="t4testing.html#accessibility-info-extraction">Accessibility Info Extraction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="t4testing.html#tbd">TBD</a></li>
<li class="toctree-l3"><a class="reference internal" href="t4testing.html#cross-engine-comparison">Cross engine comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="t4testing.html#building-pdfium">Building PDFium</a></li>
<li class="toctree-l3"><a class="reference internal" href="t4testing.html#executing-t4-vs-pdfium-tests">Executing t4 vs pdfium tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="t4testing.html#t4x">t4x</a><ul>
<li class="toctree-l3"><a class="reference internal" href="t4testing.html#rationale">Rationale</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Hello World How Tos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#t4-projects">T4 Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-a-t4-client-in-xcode">Writing a T4 Client in Xcode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#initialization-and-termination">Initialization and Termination</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-context-lock">The Context Lock</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-document-from-a-file-path">Create a document from a File Path</a></li>
<li class="toctree-l2"><a class="reference internal" href="#traverse-the-store-as-in-the-cos-api">Traverse the Store (as in the COS API)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extract-text">Extract Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="#get-a-page-s-dimensions-and-rotation">Get a Page’s Dimensions and Rotation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#render-a-page">Render a Page</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cache.html">T4 Cache APIs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cache.html#cache-overview">Cache Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cache.html#example-factorization-cache">Example: Factorization Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="cache.html#implementing-a-cache">Implementing a Cache</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cache.html#advanced-techniques">Advanced Techniques</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cache.html#caching-runtime-polymorphic-objects">Caching Runtime Polymorphic Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="cache.html#returning-a-different-key-from-the-requested-one">Returning a Different Key from the Requested One</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cache.html#notes-about-the-cache">Notes about the Cache</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cache.html#thread-safety">Thread Safety</a></li>
<li class="toctree-l3"><a class="reference internal" href="cache.html#const">Const</a></li>
<li class="toctree-l3"><a class="reference internal" href="cache.html#purging">Purging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cache.html#other-interesting-cache-features">Other Interesting Cache Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cache.html#memory-thresholds">Memory Thresholds</a></li>
<li class="toctree-l3"><a class="reference internal" href="cache.html#computing-cached-object-sizes">Computing Cached Object Sizes</a></li>
<li class="toctree-l3"><a class="reference internal" href="cache.html#update-your-object-s-size">Update Your Object’s Size</a></li>
<li class="toctree-l3"><a class="reference internal" href="cache.html#resource-pools">Resource Pools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="draw.html">Drawing PDF with T4</a><ul>
<li class="toctree-l2"><a class="reference internal" href="draw.html#using-display-event-stream">Using <code class="docutils literal notranslate"><span class="pre">display_event_stream</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data_store.html">Data Store</a><ul>
<li class="toctree-l2"><a class="reference internal" href="data_store.html#data-block">data_block</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_store.html#id1">data_store</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_store.html#data-block-stream">data_block_stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_store.html#comparison-data-store-and-data-block-stream">Comparison: data_store and data_block_stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_store.html#creating-data-stores">Creating data_stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_store.html#creating-your-own-data-store">Creating Your Own data_store</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_store.html#creating-your-own-data-block-stream">Creating Your Own data_block_stream</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="int_union.html">Using int_union</a><ul>
<li class="toctree-l2"><a class="reference internal" href="int_union.html#xprogrammers-xset-theorists">∀x∈Programmers:x∈Set Theorists</a><ul>
<li class="toctree-l3"><a class="reference internal" href="int_union.html#the-int-union-template">The int_union Template</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="int_union.html#assignment-and-comparison">Assignment and Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="int_union.html#integral-math">Integral Math</a></li>
<li class="toctree-l2"><a class="reference internal" href="int_union.html#integral-conversion">Integral Conversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="int_union.html#performance-and-safety-considerations">Performance and Safety Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="int_union.html#correctness-implications-and-implementation-limits">Correctness Implications and Implementation Limits</a><ul>
<li class="toctree-l3"><a class="reference internal" href="int_union.html#the-special-template-parameters">The “Special” Template Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="memory.html">T4 Memory APIs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="memory.html#a-quick-tour-of-t4-memory-facilities">A Quick Tour of T4 Memory Facilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="memory.html#memory-and-the-t4-cache">Memory and the T4 Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory.html#simple-allocation">Simple Allocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory.html#smart-pointers-and-containers">Smart Pointers and Containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory.html#make-unique">make_unique</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory.html#shared-ptr">shared_ptr</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="memory.html#memory-usage">Memory Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory.html#managing-memory-consumption">Managing Memory Consumption</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pagetree.html">Page Tree Navigation in T4</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pagetree.html#choosing-the-right-type">Choosing the Right Type</a></li>
<li class="toctree-l2"><a class="reference internal" href="pagetree.html#getting-from-one-type-to-another">Getting from One Type to Another</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="params.html">T4 Params Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="params.html#problem-statement">Problem Statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="params.html#approaches-to-solving-this-problem">Approaches to Solving this Problem</a><ul>
<li class="toctree-l3"><a class="reference internal" href="params.html#parameter-structs">Parameter Structs</a></li>
<li class="toctree-l3"><a class="reference internal" href="params.html#parameter-dictionaries">Parameter Dictionaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="params.html#parameter-soup">Parameter Soup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="params.html#using-t4-params">Using T4 Params</a><ul>
<li class="toctree-l3"><a class="reference internal" href="params.html#exposing-a-t4-params-based-api">Exposing a T4 Params-Based API</a></li>
<li class="toctree-l3"><a class="reference internal" href="params.html#extracting-parameters-from-a-parameters-dictionary">Extracting Parameters from a Parameters Dictionary</a></li>
<li class="toctree-l3"><a class="reference internal" href="params.html#invoking-a-t4-params-based-api">Invoking a T4 Params-Based API</a></li>
<li class="toctree-l3"><a class="reference internal" href="params.html#evolving-a-t4-params-based-api">Evolving a T4 Params-Based API</a></li>
<li class="toctree-l3"><a class="reference internal" href="params.html#compile-time-errors">Compile-Time Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="params.html#recommended-hybrid-approach">Recommended: Hybrid Approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="params.html#about-parameter-values">About Parameter Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="params.html#required-value-parameters">Required Value Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="params.html#required-reference-parameters">Required Reference Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="params.html#optional-parameters">Optional Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="params.html#required-parameters-with-default-values">Required Parameters with Default Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="params.html#parameter-descriptions-and-constexpr">Parameter Descriptions and constexpr</a></li>
<li class="toctree-l3"><a class="reference internal" href="params.html#abi-issues">ABI Issues</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tile_cache.html">Tile Cache</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tile_cache.html#the-basics">The Basics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tile_cache.html#creating-a-pdf-tile-cache">Creating a pdf_tile_cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="tile_cache.html#controlling-a-pdf-tile-cache">Controlling a pdf_tile_cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="tile_cache.html#displaying-a-pdf-tile-cache-s-contents">Displaying a pdf_tile_cache’s Contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tile_cache.html#pdf-tile-cache-details">pdf_tile_cache Details</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tile_cache.html#tile-cache-requesters">Tile Cache Requesters</a></li>
<li class="toctree-l3"><a class="reference internal" href="tile_cache.html#bitmaps">Bitmaps</a></li>
<li class="toctree-l3"><a class="reference internal" href="tile_cache.html#defining-the-bitmap-type">Defining the Bitmap Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="tile_cache.html#drawing-parameters">Drawing Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="tile_cache.html#tile-collections">Tile Collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="tile_cache.html#pdf-tile-cache-implementation-and-theory">pdf_tile_cache Implementation and Theory</a></li>
<li class="toctree-l3"><a class="reference internal" href="tile_cache.html#pdf-tile-cache-state">pdf_tile_cache State</a></li>
<li class="toctree-l3"><a class="reference internal" href="tile_cache.html#about-painting-progress">About Painting Progress</a></li>
<li class="toctree-l3"><a class="reference internal" href="tile_cache.html#pile-tiles-implementation">pile_tiles Implementation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="transient_heap.html">Transient Heap</a><ul>
<li class="toctree-l2"><a class="reference internal" href="transient_heap.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="transient_heap.html#transient-heap-applications">transient_heap Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="transient_heap.html#grow-only-or-immutable-graphs-of-heterogeneous-objects">Grow-Only or Immutable Graphs of Heterogeneous Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="transient_heap.html#algorithm-lifetime-bound-transient-allocations">Algorithm-Lifetime Bound Transient Allocations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="transient_heap.html#destruction-of-objects-in-a-transient-heap">Destruction of Objects in a transient_heap</a></li>
<li class="toctree-l2"><a class="reference internal" href="transient_heap.html#snapshots">Snapshots</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="typed_bool.html">Typed Bool</a><ul>
<li class="toctree-l2"><a class="reference internal" href="typed_bool.html#existing-approaches">Existing Approaches</a><ul>
<li class="toctree-l3"><a class="reference internal" href="typed_bool.html#t4-typed-bool">t4::typed_bool</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

        <!--- @@@@@@@@@@@@@@@@ Custom @@@@@@@@@@@@@@@@ -->
        <div class="fixedbar">  
          <div class="wy-menu-items">
            
            <a href="../gettingstarted/index.html" class="topbarlink">Getting Started</a>  
            <a href="../developerguide/index.html" class="topbarlink">Developer Guide</a>  

          
          </div>  <!--
          <div class="sign-in">
            <a href="" class="btn btn-console">Jira or?</a>
            <a href="https://auth.services.adobe.com/en_US/index.html">Sign in?</a>
          </div>-->
        </div>
        <!--- @@@@@@@@@@@@@@@@ Custom @@@@@@@@@@@@@@@@ -->
   
      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">T4 Developer Guide</a>
        
      </nav>


      <div class="wy-nav-content">
      <a href="#" id="scroll" style="display:inline;"><span></span></a>
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Hello World How Tos</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="cache.html" class="btn btn-neutral float-right" title="T4 Cache APIs" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="t4testing.html" class="btn btn-neutral float-left" title="Testing T4" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hello-world-how-tos">
<h1>Hello World How Tos<a class="headerlink" href="#hello-world-how-tos" title="Permalink to this headline">¶</a></h1>
<p>Reference: <a class="reference external" href="https://wiki.corp.adobe.com/display/t4/Getting+Started+With+T4">https://wiki.corp.adobe.com/display/t4/Getting+Started+With+T4</a></p>
<div class="section" id="t4-projects">
<h2>T4 Projects<a class="headerlink" href="#t4-projects" title="Permalink to this headline">¶</a></h2>
<p>T4 contains the following libraries, samples and tools:</p>
<ul class="simple">
<li><p>t4: this just builds the static T4 library (iOS, Android, MacOS).</p></li>
<li><p>t4x: a static library intended to support internal tools only, not for shipping.</p></li>
<li><p>t4-test: a command-line utility which can be used to generate and execute rendering and text extraction tests across large sets of .pdf files (iOS, MacOS). You can also use it to produce .pngs of pdf renderings with arbitrary parameters, do text extraction, and get document and page info.</p></li>
<li><p>t4_lab: this is a simple command line utility which links in t4. Engineers wishing to experiment with T4 in a pared-down environment without the overhead of a user interface may find this valuable (iOS, MacOS).</p></li>
<li><p>t4_app_lab: this is a simple iOS and Android app which links in t4. It’s analogous to t4_lab, except that it gives you a GUI in which to experiment with graphics (iOS, Android, MacOS).</p></li>
<li><p>t4_unit_tests: a command line executable which runs all the T4 unit tests (iOS, Android, MacOS).</p></li>
<li><p>t4view: a simple iOS app which demonstrates the t4 tile cache (iOS).</p></li>
<li><p>t4_lab: If you’re just interested in experimenting with the T4 APIs in an isolated environment, t4_lab is probably the place to start. You should feel free to modify t4_lab_main.cpp to do whatever you like.</p></li>
</ul>
</div>
<div class="section" id="writing-a-t4-client-in-xcode">
<h2>Writing a T4 Client in Xcode<a class="headerlink" href="#writing-a-t4-client-in-xcode" title="Permalink to this headline">¶</a></h2>
<p>When writing any sort of T4 client in Xcode, you must do the following:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;t4/build/xcode/t4_client.xcconfig&quot;</span><span class="c1"> from somewhere in one of your own .xcconfig files</span><span class="cp"></span>
</pre></div>
</div>
<p>Incorporate the following T4=prefixed build macros into your own build macros:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">T4_HEADER_SEARCH_PATHS</span>
<span class="n">T4_USER_HEADER_SEARCH_PATHS</span>
<span class="n">T4_GCC_PREPROCESSOR_DEFINITIONS</span>
<span class="n">T4_OTHER_CFLAGS</span>
</pre></div>
</div>
<p>You can see an example of build macros in several T4 tools, such as t4=test.xcconfig.</p>
</div>
<div class="section" id="initialization-and-termination">
<h2>Initialization and Termination<a class="headerlink" href="#initialization-and-termination" title="Permalink to this headline">¶</a></h2>
<p>For a single process, all calls into T4 must occur after a call to t4::initialize and before the balancing call to t4::terminate. This is most easily achieved by simply declaring an instance of t4::init in your implementation of main:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">t4</span><span class="o">::</span><span class="n">init</span> <span class="n">init</span><span class="p">;</span>
    <span class="o">&lt;&lt;</span> <span class="n">Run</span> <span class="n">your</span> <span class="n">app</span> <span class="n">here</span> <span class="o">&gt;&gt;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>t4::init is an <a class="reference external" href="https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization">RAII</a> class that manages all the globals associated with the t4 runtime. Instances can safely have overlapping lifetimes, but the moment the last one goes out of scope all t4 objects will be destroyed and any t4 objects allocated during that lifetime will be unusable. They won’t even be freeable. So you can’t just create t4::init instances lazily and expect it to work:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">t4</span><span class="o">::</span><span class="n">pdf</span><span class="o">::</span><span class="n">document</span><span class="o">&gt;</span> <span class="n">open_document</span>
<span class="p">{</span>
    <span class="c1">// This code almost certainly won&#39;t work!  If it does that means there&#39;s an</span>
    <span class="c1">// enclosing instance of t4::init, in which case this declaration is</span>
    <span class="c1">// completely unnecessary.</span>
    <span class="n">t4</span><span class="o">::</span><span class="n">init</span> <span class="n">init</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">t4</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">t4</span><span class="o">::</span><span class="n">pdf</span><span class="o">::</span><span class="n">document</span><span class="o">&gt;</span><span class="p">(</span> <span class="p">...</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-context-lock">
<h2>The Context Lock<a class="headerlink" href="#the-context-lock" title="Permalink to this headline">¶</a></h2>
<p>Any thread making calls into T4 must do so within the lifetime of an instance of t4::context_lock. An instance of context_lock insures that users of T4 are cooperatively interleaved (we are working on removing this restriction, but until it’s completely gone, you’ll still need to use context_lock).</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;t4/context_lock.hpp&quot;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">t4</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">my_operation</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">t4</span><span class="o">::</span><span class="n">context_lock</span> <span class="n">lock</span><span class="p">;</span>
   <span class="c1">// Make calls into T4 here</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Code executed inside of a context_lock is <em>not</em> atomically executed–it is simply interleaved with any other thread holding a context_lock.</p>
</div>
<div class="section" id="create-a-document-from-a-file-path">
<h2>Create a document from a File Path<a class="headerlink" href="#create-a-document-from-a-file-path" title="Permalink to this headline">¶</a></h2>
<p>To create a document you must start with an implementation of the data_store interface. This is an abstract interface whose job is to serve up buffers of bytes requested by file offset. You don’t need to know anything about the data_store API, though; if you want to open a file on the file system just use file_data_store. Then pass a shared_ptr to a data_store to pdf::document’s ctor:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;t4/file_data_store.hpp&quot;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">t4</span><span class="p">;</span>

<span class="n">context_lock</span> <span class="n">lock</span><span class="p">;</span>
<span class="k">auto</span> <span class="n">ds</span> <span class="o">=</span> <span class="n">make_file_data_store</span><span class="p">(</span> <span class="s">&quot;path/to/my.pdf&quot;</span> <span class="p">);</span>
<span class="n">t4</span><span class="o">::</span><span class="n">pdf</span><span class="o">::</span><span class="n">document</span> <span class="n">doc</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span> <span class="n">ds</span> <span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
<p>Under the hood, t4::pdf::document is just a wrapper around two much older T3 objects: the Store, which is essentially a CosDoc, and the DocumentCaches object, which is a collection of caches that map dictionaries in the store to their (usually) complex derived representations such as fonts and color spaces. Unfortunately these two classes are implemented using T3 idioms, but using them is still relatively straightforward.</p>
<p><strong>Dealing with Encrypted Documents</strong>
In the above example, the document will successfully open if it was unencrypted or if it was encrypted using the standard security handler and an empty user password. You can detect if neither of this conditions were met using the is_decrypted  function:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">is_decrypted</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;doc is not decrypted.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>You can ask a still=encrypted document for the name of its security handler:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">boost</span><span class="o">::</span><span class="n">optional</span><span class="o">&lt;</span><span class="n">t4</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">shn</span> <span class="o">=</span> <span class="n">get_security_handler_name</span><span class="p">(</span><span class="n">doc</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">shn</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">shn</span> <span class="o">==</span> <span class="s">&quot;Standard&quot;</span><span class="p">)</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;doc is encrypted with the /Standard security handler.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>You can then use the <code class="docutils literal notranslate"><span class="pre">decrypt</span></code> function, passing an instance of <code class="docutils literal notranslate"><span class="pre">standard_credentials</span></code>, to attempt to decrypt the document:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">shn</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">shn</span> <span class="o">==</span> <span class="s">&quot;Standard&quot;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">decrypt</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">standard_credentials</span><span class="p">(</span><span class="s">&quot;my_password&quot;</span><span class="p">)))</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;success!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;my_password is not the correct password.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Once decrypted, you can ask for permissions on a document using the <code class="docutils literal notranslate"><span class="pre">get_permitted_operations</span></code> function:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">permitted_operations</span> <span class="n">perms</span> <span class="o">=</span> <span class="n">get_permitted_operations</span><span class="p">(</span><span class="n">doc</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">perms</span><span class="p">[</span><span class="n">permitted_operation</span><span class="o">::</span><span class="n">printing</span><span class="p">])</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;printing is permitted.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">perms</span><span class="p">[</span><span class="n">permitted_operation</span><span class="o">::</span><span class="n">form_entry</span><span class="p">])</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;forms entry is permitted.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="traverse-the-store-as-in-the-cos-api">
<h2>Traverse the Store (as in the COS API)<a class="headerlink" href="#traverse-the-store-as-in-the-cos-api" title="Permalink to this headline">¶</a></h2>
<p>Because of <code class="docutils literal notranslate"><span class="pre">app_traits</span></code>, the actual type of <code class="docutils literal notranslate"><span class="pre">document::get_store</span></code>’s return value is arduous to type out. auto is your friend here:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">store</span> <span class="o">=</span> <span class="n">doc</span><span class="p">.</span><span class="n">get_store</span><span class="p">();</span>
</pre></div>
</div>
<p>To traverse the contents of the <code class="docutils literal notranslate"><span class="pre">Store</span></code>, start by calling GetTrailer():</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span> <span class="n">trailer</span> <span class="o">=</span> <span class="n">store</span><span class="p">.</span><span class="n">GetTrailer</span><span class="p">();</span>
</pre></div>
</div>
<p>From the trailer dictionary you can get the <strong>/Root</strong> dictionary, and then you’re off and running.</p>
<p><strong>Dictionaries</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">trailer</span></code> is a Dictionary object. The Dictionary API may be found in <code class="docutils literal notranslate"><span class="pre">tetraphilia/pdf/store/Object.hpp</span></code>, but here’s a thumbnail:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">object_traits</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">Dictionary</span>
<span class="p">{</span>
    <span class="p">...</span>
    <span class="k">typedef</span> <span class="n">Object</span><span class="o">&lt;</span><span class="n">object_traits</span><span class="o">&gt;</span> <span class="n">object_type</span><span class="p">;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">object_traits</span></code> is a template parameter which allows us to distinguish PDF objects in the content stream from PDF objects in the object store. These two categories of objects are not intermixable, and we use the template argument to insure that we do not mix them at compile time.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">object_type</span></code> member typedef identifies the class used to model generic PDF objects. It is a variant class containing a union and a discriminator, similar to the <code class="docutils literal notranslate"><span class="pre">CosObj</span></code> class.</p>
<p>Here are two fundamental accessor APIs:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="o">:</span>
    <span class="c1">// returns null object_type if absent</span>
    <span class="n">object_type</span> <span class="n">Get</span><span class="p">(</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">key</span> <span class="p">)</span> <span class="k">const</span><span class="p">;</span>

    <span class="c1">// throws an exception if absent</span>
    <span class="n">object_type</span> <span class="nf">GetRequired</span><span class="p">(</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">key</span> <span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</pre></div>
</div>
<p>Dictionary provides a bunch of helper APIs which are simple wrappers around the above two entry points. Here are two examples:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Looks up &quot;key&quot; in the dictionary. If present and integral, returns that value.</span>
<span class="c1">// If present but nonintegral, throws an exception.</span>
<span class="c1">// If absent, returns missing_value.</span>
<span class="n">int_type</span> <span class="nf">GetInteger</span><span class="p">(</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">key</span><span class="p">,</span> <span class="n">int_type</span> <span class="n">missing_value</span> <span class="p">)</span> <span class="k">const</span><span class="p">;</span>

<span class="c1">// Looks up &quot;key&quot; in the dictionary. If present and integral, returns that value.</span>
<span class="c1">// Otherwise throws an exception.</span>
<span class="n">int_type</span> <span class="nf">GetRequiredInteger</span><span class="p">(</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">key</span> <span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</pre></div>
</div>
<p>For other types, it’s more useful to simply return <code class="docutils literal notranslate"><span class="pre">boost::optional</span></code> objects to distinguish the presence/absence case:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Looks up &quot;key&quot; in the dictionary. If present and a name returns that value.</span>
<span class="c1">// If present but not a name, throws an exception.</span>
<span class="c1">// If absent, returns an uninitialized boost::optional.</span>
<span class="n">boost</span><span class="o">::</span><span class="n">optional</span><span class="o">&lt;</span><span class="n">name_type</span><span class="o">&gt;</span> <span class="n">GetName</span><span class="p">(</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">key</span> <span class="p">);</span>

<span class="c1">// Looks up &quot;key&quot; in the dictionary. If present and a name, returns that value.</span>
<span class="c1">// Otherwise throws an exception.</span>
<span class="n">name_type</span> <span class="nf">GetRequiredName</span><span class="p">(</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">key</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="extract-text">
<h2>Extract Text<a class="headerlink" href="#extract-text" title="Permalink to this headline">¶</a></h2>
<p>To extract the text on a single page complete with geometric information, use <code class="docutils literal notranslate"><span class="pre">t4::pdf::enumerate_content</span></code>. Here is an example:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">t4</span><span class="o">::</span><span class="n">pdf</span><span class="p">;</span>


<span class="k">auto</span> <span class="n">doc</span> <span class="o">=</span> <span class="n">open_document</span><span class="p">(</span><span class="s">&quot;test.pdf&quot;</span><span class="p">);</span>
<span class="k">auto</span> <span class="n">f</span> <span class="o">=</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">](</span><span class="n">std</span><span class="o">::</span><span class="kt">uint32_t</span> <span class="n">u</span><span class="p">,</span> <span class="n">extracted_glyph</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">g</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Pipe all printable ASCII to stdout</span>
    <span class="k">if</span> <span class="p">(</span><span class="mi">32</span> <span class="o">&lt;=</span> <span class="n">u</span> <span class="o">&amp;&amp;</span> <span class="n">u</span> <span class="o">&lt;</span> <span class="mi">127</span><span class="p">)</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">(</span><span class="n">u</span><span class="p">);</span>
    <span class="k">else</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;?&#39;</span><span class="p">;</span>
<span class="p">});</span>


<span class="n">enumerate_content</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">get_page_id</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">f</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">extracted_glyph</span></code> class exposes an interface allowing the caller to get geometric information about the glyph. This example builds a (very inefficient) bezier path comprised of the bounding box of every glyph on the first page:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span> <span class="n">doc</span> <span class="o">=</span> <span class="n">open_document</span><span class="p">(</span><span class="s">&quot;test.pdf&quot;</span><span class="p">);</span>
<span class="n">bezier_path</span> <span class="n">result</span><span class="p">;</span>
<span class="k">auto</span> <span class="n">f</span> <span class="o">=</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">](</span><span class="n">std</span><span class="o">::</span><span class="kt">uint32_t</span> <span class="n">u</span><span class="p">,</span> <span class="n">extracted_glyph</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">g</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">leading_edge</span> <span class="o">=</span> <span class="n">g</span><span class="p">.</span><span class="n">GetLeadingEdge</span><span class="p">();</span>
    <span class="k">auto</span> <span class="n">trailing_edge</span> <span class="o">=</span> <span class="n">g</span><span class="p">.</span><span class="n">GetTrailingEdge</span><span class="p">();</span>


    <span class="n">MoveTo</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">leading_edge</span><span class="p">.</span><span class="n">first</span><span class="p">);</span>
    <span class="n">LineTo</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">leading_edge</span><span class="p">.</span><span class="n">second</span><span class="p">);</span>
    <span class="n">LineTo</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">trailing_edge</span><span class="p">.</span><span class="n">first</span><span class="p">);</span>
    <span class="n">LineTo</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">trailing_edge</span><span class="p">.</span><span class="n">second</span><span class="p">);</span>
    <span class="n">ClosePath</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">});</span>


<span class="n">enumerate_content</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">get_page_id</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">f</span><span class="p">);</span>
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">StartsNewRange()</span></code> member function of <code class="docutils literal notranslate"><span class="pre">extracted_glyph</span></code> to produce a more efficient path. It returns true whenever a character has a different baseline or metrics from the previous character.</p>
</div>
<div class="section" id="get-a-page-s-dimensions-and-rotation">
<h2>Get a Page’s Dimensions and Rotation<a class="headerlink" href="#get-a-page-s-dimensions-and-rotation" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">t4</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">dump_info</span><span class="p">(</span><span class="n">pdf</span><span class="o">::</span><span class="n">document</span><span class="o">&amp;</span> <span class="n">doc</span><span class="p">,</span> <span class="n">pdf</span><span class="o">::</span><span class="n">page_num</span> <span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">pg</span> <span class="o">=</span> <span class="n">doc</span><span class="p">.</span><span class="n">get_page_geometry</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>

    <span class="c1">// The cropped media box in default page space</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;cropped media box: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">pg</span><span class="p">.</span><span class="n">m_cropped_media_box</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="c1">// The page&#39;s rotation (will be one of rot_0, rot_90, rot_180 and rot_270)</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;rotation: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">pg</span><span class="p">.</span><span class="n">m_rotation</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="render-a-page">
<h2>Render a Page<a class="headerlink" href="#render-a-page" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">t4</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">draw_into_buffer</span><span class="p">(</span><span class="n">pdf</span><span class="o">::</span><span class="n">document</span><span class="o">&amp;</span> <span class="n">doc</span><span class="p">,</span> <span class="n">pdf</span><span class="o">::</span><span class="n">page_num</span> <span class="n">p</span><span class="p">,</span> <span class="n">MyPixelBufferObj</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">myPB</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">xform</span> <span class="o">=</span> <span class="n">identity</span><span class="o">&lt;</span><span class="n">affine_transform</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="n">pdf</span><span class="o">::</span><span class="n">draw_page</span><span class="p">(</span><span class="n">myPB</span><span class="p">.</span><span class="n">GetPixels</span><span class="p">(),</span> <span class="n">myPB</span><span class="p">.</span><span class="n">GetScanLineStride</span><span class="p">(),</span> <span class="n">doc</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">xform</span><span class="p">,</span>
        <span class="n">myPB</span><span class="p">.</span><span class="n">GetBounds</span><span class="p">(),</span> <span class="k">nullptr</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">MyPixelBufferObj</span></code> is not a t4 construct; most clients have some sort of data type that encapsulates a pixel buffer with a bounding rectangle. This flavor of <code class="docutils literal notranslate"><span class="pre">draw_page</span></code> presumes BGRx pixel storage, for which T4 is highly optimized. It produces correct opaque BGR color values in the first three channels. The fourth channel will be written to by T4, but do not presume that you’ll find meaningful alpha values there. See the comments in draw_page’s documentation for the gory details.</p>
<p>The relationship between the <code class="docutils literal notranslate"><span class="pre">pixels,</span> <span class="pre">scan_line_stride,</span> <span class="pre">xform</span> <span class="pre">and</span> <span class="pre">device_clip</span></code> parameters is worth expanding on: <code class="docutils literal notranslate"><span class="pre">xform</span></code> defines the transformation matrix from default page space to device space. <code class="docutils literal notranslate"><span class="pre">device_clip</span></code> is an integral rectangle in device space and it defines the region of <code class="docutils literal notranslate"><span class="pre">pixels</span></code> that will be painted. The first pixel in pixels is located in device space at <code class="docutils literal notranslate"><span class="pre">(get_xmin(device_clip),</span> <span class="pre">get_ymin(device_clip))</span></code>. <code class="docutils literal notranslate"><span class="pre">scan_line_stride</span></code> defines the distance in bytes between the pixel at (x, y) and the pixel at (x, y+1). It is the client’s job to insure that <code class="docutils literal notranslate"><span class="pre">pixels</span></code> points to at least <code class="docutils literal notranslate"><span class="pre">get_height(device_clip)</span> <span class="pre">*</span> <span class="pre">scan_line_stride</span></code> bytes worth of data, and that <code class="docutils literal notranslate"><span class="pre">scan_line_stride</span> <span class="pre">&gt;=</span> <span class="pre">get_width(device_clip)</span> <span class="pre">*</span> <span class="pre">4</span></code>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Adobe Inc..
      <span class="lastupdated">
        Last update: Aug 30, 2021. 
        <img src="../_static/adobelogo.png" class="logo"/> 
      </span>

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>